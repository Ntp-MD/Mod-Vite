import{a as w}from"./axios-B2YOV0tR.js";import{_ as N,c as o,b as s,h as S,F as u,f as p,w as m,v as f,o as a,n as h,i as g,t as C}from"./index-BdWZckva.js";import{_ as c}from"./swap-CD_7elA0.js";import{_ as A}from"./search-Cu_kMHqT.js";const W={data(){return{currentSites:[],waitingSites:[],completeSites:[],selectedCurrentSiteNames:[],selectedWaitingSiteNames:[],selectedCompleteSiteNames:[],newCurrentSite:"",searchQuery:""}},computed:{sortedCurrentSites(){return[...this.currentSites].sort((t,e)=>new Date(t.addedAt)-new Date(e.addedAt))},sortedWaitingSites(){return[...this.waitingSites].sort((t,e)=>new Date(t.addedAt)-new Date(e.addedAt))},sortedCompleteSites(){return[...this.completeSites].sort((t,e)=>new Date(t.addedAt)-new Date(e.addedAt))},filteredCurrentSites(){return this.sortedCurrentSites.filter(this.matchesSearch)},filteredWaitingSites(){return this.sortedWaitingSites.filter(this.matchesSearch)},filteredCompleteSites(){return this.sortedCompleteSites.filter(this.matchesSearch)},isAllCurrentSelected(){return this.currentSites.length>0&&this.selectedCurrentSiteNames.length===this.currentSites.length},isAllWaitingSelected(){return this.waitingSites.length>0&&this.selectedWaitingSiteNames.length===this.waitingSites.length},isAllCompleteSelected(){return this.completeSites.length>0&&this.selectedCompleteSiteNames.length===this.completeSites.length}},watch:{currentSites:{handler(t){localStorage.setItem("promoApp_currentSites",JSON.stringify(t))},deep:!0},waitingSites:{handler(t){localStorage.setItem("promoApp_waitingSites",JSON.stringify(t))},deep:!0},completeSites:{handler(t){localStorage.setItem("promoApp_completeSites",JSON.stringify(t))},deep:!0}},mounted(){const t=localStorage.getItem("promoApp_currentSites"),e=localStorage.getItem("promoApp_waitingSites"),r=localStorage.getItem("promoApp_completeSites");t!==null||e!==null||r!==null?(console.log("Loading data from localStorage."),this.currentSites=(JSON.parse(t)||[]).filter(l=>l&&l.name),this.waitingSites=(JSON.parse(e)||[]).filter(l=>l&&l.name),this.completeSites=(JSON.parse(r)||[]).filter(l=>l&&l.name)):(console.log("No localStorage data. Loading from server."),w.get("http://localhost:3001/data").then(l=>{const d=l.data;this.currentSites=d.Current||[],this.waitingSites=d.Waiting||[],this.completeSites=d.Complete||[]}).catch(l=>{console.error("Error loading from server:",l)}))},methods:{matchesSearch(t){const e=this.searchQuery.toLowerCase();return t.name.toLowerCase().includes(e)||t.note&&t.note.toLowerCase().includes(e)||t.status&&t.status.toLowerCase().includes(e)},isMatch(t){return this.searchQuery&&t.toLowerCase().includes(this.searchQuery.toLowerCase())},toggleSelectAll(t){switch(t){case"current":this.selectedCurrentSiteNames=this.isAllCurrentSelected?[]:this.currentSites.map(e=>e.name);break;case"waiting":this.selectedWaitingSiteNames=this.isAllWaitingSelected?[]:this.waitingSites.map(e=>e.name);break;case"complete":this.selectedCompleteSiteNames=this.isAllCompleteSelected?[]:this.completeSites.map(e=>e.name);break}},_moveSelectedItems(t,e,r){const l=this[r];if(l.length===0)return;const v=this[t].filter(i=>l.includes(i.name)).filter(i=>!this[e].some(n=>n.name===i.name));this[e].push(...v),this[t]=this[t].filter(i=>!l.includes(i.name)),this[r]=[]},moveSelectedFromCurrentToWaiting(){this._moveSelectedItems("currentSites","waitingSites","selectedCurrentSiteNames"),this.syncToServer()},moveSelectedFromWaitingToCurrent(){this._moveSelectedItems("waitingSites","currentSites","selectedWaitingSiteNames"),this.syncToServer()},moveSelectedFromWaitingToComplete(){this._moveSelectedItems("waitingSites","completeSites","selectedWaitingSiteNames"),this.syncToServer()},moveSelectedFromCompleteToWaiting(){this._moveSelectedItems("completeSites","waitingSites","selectedCompleteSiteNames"),this.syncToServer()},clearSelectedFromAll(){this.currentSites=this.currentSites.filter(t=>!this.selectedCurrentSiteNames.includes(t.name)),this.waitingSites=this.waitingSites.filter(t=>!this.selectedWaitingSiteNames.includes(t.name)),this.completeSites=this.completeSites.filter(t=>!this.selectedCompleteSiteNames.includes(t.name)),this.selectedCurrentSiteNames=[],this.selectedWaitingSiteNames=[],this.selectedCompleteSiteNames=[],this.syncToServer()},addNewCurrentSite(){const t=this.newCurrentSite.trim().toLowerCase(),e=[...this.currentSites,...this.waitingSites,...this.completeSites].map(r=>r.name.toLowerCase());t&&!e.includes(t)&&(this.currentSites.push({name:t,addedAt:new Date().toISOString()}),this.newCurrentSite="",this.syncToServer())},syncToServer(){const t={Current:this.currentSites,Waiting:this.waitingSites,Complete:this.completeSites};w.post("http://localhost:3001/update-data",t).then(()=>{console.log("Data synced to server.")}).catch(e=>{console.error("Sync failed:",e)})}}},k={...W},y={class:"PromoPanel"},b={class:"CurrentCard"},T={class:"list-title"},F={class:"selectAll"},L=["checked"],I={class:"list-group"},D=["value","id"],O=["for"],V={class:"add-box"},$={class:"group-btn"},J={class:"SwapCard"},M={class:"WaitingCard"},Q={class:"list-title"},P={class:"selectAll"},U=["checked"],B={class:"list-group"},E=["value","id"],q=["for"],z={class:"search-box"},j={class:"SwapCard"},G={class:"CompleteCard"},H={class:"list-title"},K={class:"selectAll"},R=["checked"],X={class:"list-group"},Y=["value","id"],Z=["for"],_={class:"group-btn"};function x(t,e,r,l,d,v){return a(),o("div",y,[s("div",b,[s("div",T,[e[17]||(e[17]=S(" Current Card ")),s("div",F,[s("input",{type:"checkbox",checked:t.isAllCurrentSelected,onChange:e[0]||(e[0]=i=>t.toggleSelectAll("current")),id:"select-all-current"},null,40,L),e[16]||(e[16]=s("div",{for:"select-all-current"},"Select All",-1))])]),s("div",I,[(a(!0),o(u,null,p(t.sortedCurrentSites,i=>(a(),o("div",{key:"current-"+i.name,class:h(["list-item",{highlighted:t.isMatch(i.name)}])},[m(s("input",{type:"checkbox",value:i.name,"onUpdate:modelValue":e[1]||(e[1]=n=>t.selectedCurrentSiteNames=n),id:"current-"+(i.name||"").replace(/\./g,"-")},null,8,D),[[g,t.selectedCurrentSiteNames]]),s("div",{for:"current-"+(i.name||"").replace(/\./g,"-")},C(i.name),9,O)],2))),128))]),s("div",V,[m(s("input",{"onUpdate:modelValue":e[2]||(e[2]=i=>t.newCurrentSite=i),placeholder:"Enter new site"},null,512),[[f,t.newCurrentSite]])]),s("div",$,[s("div",{class:"action-button add-btn",onClick:e[3]||(e[3]=(...i)=>t.addNewCurrentSite&&t.addNewCurrentSite(...i))},"Add"),s("div",{class:"action-button clear-btn",onClick:e[4]||(e[4]=(...i)=>t.clearSelectedFromAll&&t.clearSelectedFromAll(...i))},"Clear Select")])]),s("div",J,[s("div",{class:"PrevSwap",onClick:e[5]||(e[5]=(...i)=>t.moveSelectedFromCurrentToWaiting&&t.moveSelectedFromCurrentToWaiting(...i))},e[18]||(e[18]=[s("img",{src:c,alt:""},null,-1)])),s("div",{class:"NextSwap",onClick:e[6]||(e[6]=(...i)=>t.moveSelectedFromWaitingToCurrent&&t.moveSelectedFromWaitingToCurrent(...i))},e[19]||(e[19]=[s("img",{src:c,alt:""},null,-1)]))]),s("div",M,[s("div",Q,[e[21]||(e[21]=S(" Waiting Card ")),s("div",P,[s("input",{type:"checkbox",checked:t.isAllWaitingSelected,onChange:e[7]||(e[7]=i=>t.toggleSelectAll("waiting")),id:"select-all-waiting"},null,40,U),e[20]||(e[20]=s("div",{for:"select-all-waiting"},"Select All",-1))])]),s("div",B,[(a(!0),o(u,null,p(t.sortedWaitingSites,i=>(a(),o("div",{key:"waiting-"+i.name,class:h(["list-item",{highlighted:t.isMatch(i.name)}])},[m(s("input",{type:"checkbox",value:i.name,"onUpdate:modelValue":e[8]||(e[8]=n=>t.selectedWaitingSiteNames=n),id:"waiting-"+(i.name||"").replace(/\./g,"-")},null,8,E),[[g,t.selectedWaitingSiteNames]]),s("div",{for:"waiting-"+(i.name||"").replace(/\./g,"-")},C(i.name),9,q)],2))),128))]),s("div",z,[m(s("input",{class:"search-input",type:"search","onUpdate:modelValue":e[9]||(e[9]=i=>t.searchQuery=i),placeholder:"Search Website"},null,512),[[f,t.searchQuery]]),e[22]||(e[22]=s("img",{src:A,alt:""},null,-1))])]),s("div",j,[s("div",{class:"PrevSwap",onClick:e[10]||(e[10]=(...i)=>t.moveSelectedFromWaitingToComplete&&t.moveSelectedFromWaitingToComplete(...i))},e[23]||(e[23]=[s("img",{src:c,alt:""},null,-1)])),s("div",{class:"NextSwap",onClick:e[11]||(e[11]=(...i)=>t.moveSelectedFromCompleteToWaiting&&t.moveSelectedFromCompleteToWaiting(...i))},e[24]||(e[24]=[s("img",{src:c,alt:""},null,-1)]))]),s("div",G,[s("div",H,[e[26]||(e[26]=S(" Complete Card ")),s("div",K,[s("input",{type:"checkbox",checked:t.isAllCompleteSelected,onChange:e[12]||(e[12]=i=>t.toggleSelectAll("complete")),id:"select-all-complete"},null,40,R),e[25]||(e[25]=s("div",{for:"select-all-complete"},"Select All",-1))])]),s("div",X,[(a(!0),o(u,null,p(t.sortedCompleteSites,i=>(a(),o("div",{key:"complete-"+i.name,class:h(["list-item",{highlighted:t.isMatch(i.name)}])},[m(s("input",{type:"checkbox",value:i.name,"onUpdate:modelValue":e[13]||(e[13]=n=>t.selectedCompleteSiteNames=n),id:"complete-"+(i.name||"").replace(/\./g,"-")},null,8,Y),[[g,t.selectedCompleteSiteNames]]),s("div",{for:"complete-"+(i.name||"").replace(/\./g,"-")},C(i.name),9,Z)],2))),128))]),s("div",_,[s("div",{class:"action-button add-btn",onClick:e[14]||(e[14]=(...i)=>t.addNewCurrentSite&&t.addNewCurrentSite(...i))},"Add"),s("div",{class:"action-button clear-btn",onClick:e[15]||(e[15]=(...i)=>t.clearSelectedFromAll&&t.clearSelectedFromAll(...i))},"Clear Select")])])])}const le=N(k,[["render",x],["__scopeId","data-v-948cd17a"]]);export{le as default};
