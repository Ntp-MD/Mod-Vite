import{h as H,r as S,i as G,w as V,f as P,z as j,A as X,_ as Z,c as v,j as a,k as K,l as U,a as t,F as w,m as Y,p as ee,q as te,v as se,s as le,n as g,y as ne,t as u,o as d}from"./index-DKO9Ots2.js";import ae from"./Loading-CkcDxEeQ.js";import{u as oe,a as ie,P as re}from"./useLoading-B-6zSuPr.js";const ce=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function ue(){const{showLoading:T,hideLoading:W}=oe(),N=H(),b=new AbortController,c=S([]),f=S(0),_=S(0),m=S(""),p=S(""),y=S(null),k=S(!1),O="https://corsproxy.io/?"+encodeURIComponent("https://docs.google.com/spreadsheets/d/e/2PACX-1vRbhLBcw4jg80ogDxEeLs5wRrsQdFrWoN0g8OGy3aO_YJ0UoL-BIhuY8EozSzuTXppIIbfqp100FYIZ/pub?gid=1419480009&single=true&output=csv"),B=G(()=>{const e=new Set;return c.value.forEach(l=>{l.onlineYear>0&&e.add(l.onlineYear)}),Array.from(e).sort((l,r)=>r-l)}),A=G(()=>f.value!==0||_.value!==0||p.value!=="");function F(){f.value=0,_.value=0,m.value="",p.value=""}let L=null;V(m,e=>{clearTimeout(L),L=setTimeout(()=>p.value=(e||"").toLowerCase().trim(),200)});const i=e=>String(e??"").trim(),C=e=>i(e).toLowerCase();function I(e,l){const r=Number(i(e.Month))||0,o=i(e.Name),M=i(e.OnlineDate);let R=0;const E=M.match(/\d{4}/);return E&&(R=Number(E[0])),{id:l,selectName:o,selectOnlineDate:M,selectfree5GB:i(e.Free5GB),selectfreeSearchConsole:i(e.FreeSearchConsole),selectfreeSmartWidget:i(e.FreeSmartWidget),onlineSearchConsole:i(e.OnlineSearchConsole),onlineSmartWidget:i(e.OnlineSmartWidget),Check5GB:i(e.Check5GB),onlineMonth:r,onlineYear:R,_name_lc:C(e.Name),_5gb_lc:C(e.Free5GB),_sc_lc:C(e.FreeSearchConsole),_sw_lc:C(e.FreeSmartWidget)}}async function x(){T();try{const e=await ie.get(O,{responseType:"text",signal:b.signal});re.parse(e.data,{header:!0,skipEmptyLines:!0,complete:({data:l})=>{let r=1;c.value=l.filter(o=>o==null?void 0:o.Name).map(o=>I(o,r++)),W()}})}catch{c.value=[],W()}}const s=G(()=>{const e=f.value,l=_.value,r=p.value;return e===0&&l===0&&!r?c.value:c.value.filter(o=>!(e===0||o.onlineYear===e)||!(l===0||o.onlineMonth===l)?!1:r?o._name_lc.includes(r)||o._5gb_lc.includes(r)||o._sc_lc.includes(r)||o._sw_lc.includes(r):!0)}),n=G(()=>{const e=s.value;return k.value?e.slice(-100):e});function h(){y.value&&s.value.length>15&&y.value.scrollIntoView({behavior:"smooth",block:"end"})}V(s,()=>X(h));function D(e){const l=e.selectfree5GB==="à¹€à¸žà¸´à¹ˆà¸¡à¸žà¸·à¹‰à¸™à¸—à¸µà¹ˆ (5 GB)";return!l&&!e.Check5GB?"NoService":l&&e.Check5GB==="Completed"?"Installed":l&&!e.Check5GB?"Wait":""}function z(e){return!e.selectfree5GB&&!e.Check5GB?"à¹„à¸¡à¹ˆà¸¡à¸µà¸šà¸£à¸´à¸à¸²à¸£":e.selectfree5GB||"à¹€à¸žà¸´à¹ˆà¸¡à¸žà¸·à¹‰à¸™à¸—à¸µà¹ˆ (5 GB)"}function $(e){return e.onlineSearchConsole==="Installed"?"Installed":!e.onlineSearchConsole||e.onlineSearchConsole==="Wait"?"Wait":""}function q(e){const l=e.onlineSearchConsole;return!l||l==="Wait"?"Search Console":l==="Installed"?"Search Console Installed":e.selectfreeSearchConsole||"Search Console"}function J(e){const l=e.onlineSmartWidget;return l==="Installed"||e.selectfreeSmartWidget==="Smart Widget"?"Installed":l==="Google Ads"?"Ads":l==="à¹„à¸¡à¹ˆà¸¡à¸µà¸šà¸£à¸´à¸à¸²à¸£"?"NoService":l==="Wait"?"Wait":""}function Q(e){const l=e.onlineSmartWidget;return l==="à¹„à¸¡à¹ˆà¸¡à¸µà¸šà¸£à¸´à¸à¸²à¸£"?"à¹„à¸¡à¹ˆà¸¡à¸µà¸šà¸£à¸´à¸à¸²à¸£":l==="Google Ads"?"Google Ads":l==="Installed"?"Smart Widget Installed":l==="Wait"&&(e.selectfreeSmartWidget==="Smart Widget"||!e.selectfreeSmartWidget)?"Smart Widget":e.selectfreeSmartWidget||"Smart Widget"}return P(()=>{x(),h()}),j(()=>b.abort()),{MONTH_NAMES:ce,ui:N,sheetRows:c,selectedYear:f,selectedMonth:_,searchQuery:m,debouncedQuery:p,bottom:y,showLast100:k,availableYears:B,hasActiveFilters:A,filteredRows:s,displayedRows:n,resetFilters:F,scrollToBottom:h,free5gbClass:D,free5gbLabel:z,searchConsoleClass:$,searchConsoleLabel:q,smartWidgetClass:J,smartWidgetLabel:Q}}const de={class:"online-website-view"},fe={class:"table-section"},me={class:"table-views"},he={style:{width:"10%"}},ve={class:"filter-sidebar"},ge={class:"filter-section"},be={class:"filter-group"},pe={class:"filter-group"},Se={class:"filter-options"},Ce=["onClick"],_e={class:"filter-group"},ye={class:"filter-options"},We=["onClick"],ke={class:"filter-actions"},Be={class:"results-summary"},Le={class:"result-count"},Ge={__name:"OnlineWebsiteViews",setup(T){const{MONTH_NAMES:W,ui:N,selectedYear:b,selectedMonth:c,searchQuery:f,bottom:_,showLast100:m,availableYears:p,hasActiveFilters:y,filteredRows:k,displayedRows:O,resetFilters:B,free5gbClass:A,free5gbLabel:F,searchConsoleClass:L,searchConsoleLabel:i,smartWidgetClass:C,smartWidgetLabel:I}=ue();return(x,s)=>(d(),v("div",de,[a(N).isLoading?(d(),K(ae,{key:0})):U("",!0),t("main",fe,[t("div",me,[t("table",null,[s[6]||(s[6]=t("thead",null,[t("tr",null,[t("th",{style:{width:"10%"}},"Date"),t("th",null,"Website Name"),t("th",{style:{width:"15%"}},"Space 5GB"),t("th",{style:{width:"18%"}},"Search Console"),t("th",{style:{width:"18%"}},"Smart Widget")])],-1)),t("tbody",null,[(d(!0),v(w,null,Y(a(O),n=>(d(),v("tr",{key:n.id},[t("td",he,u(n.selectOnlineDate),1),t("td",null,u(n.selectName),1),t("td",{class:g(["hasStatus",a(A)(n)]),style:{width:"15%"}},u(a(F)(n)),3),t("td",{class:g(["hasStatus",a(L)(n)]),style:{width:"18%"}},u(a(i)(n)),3),t("td",{class:g(["hasStatus",a(C)(n)]),style:{width:"18%"}},u(a(I)(n)),3)]))),128))])])])]),t("aside",ve,[t("div",ge,[s[12]||(s[12]=t("div",{class:"filter-title"},"Filters",-1)),t("div",be,[s[7]||(s[7]=t("label",{class:"filter-label"},"Search",-1)),t("form",{onSubmit:s[1]||(s[1]=ee(()=>{},["prevent"]))},[te(t("input",{type:"search",class:"search-input",placeholder:"Search website...","onUpdate:modelValue":s[0]||(s[0]=n=>le(f)?f.value=n:null),autocomplete:"off"},null,512),[[se,a(f)]])],32)]),t("div",pe,[s[8]||(s[8]=t("label",{class:"filter-label"},"Year",-1)),t("div",Se,[t("button",{class:g({active:a(b)===0}),onClick:s[2]||(s[2]=n=>b.value=0)},"All",2),(d(!0),v(w,null,Y(a(p),n=>(d(),v("button",{key:n,class:g({active:a(b)===n}),onClick:h=>b.value=n},u(n),11,Ce))),128))])]),t("div",_e,[s[9]||(s[9]=t("label",{class:"filter-label"},"Month",-1)),t("div",ye,[t("button",{class:g({active:a(c)===0}),onClick:s[3]||(s[3]=n=>c.value=0)},"All",2),(d(!0),v(w,null,Y(a(W),(n,h)=>(d(),v("button",{key:h+1,class:g({active:a(c)===h+1}),onClick:D=>c.value=h+1},u(n),11,We))),128))])]),t("div",ke,[a(y)?(d(),v("button",{key:0,onClick:s[4]||(s[4]=(...n)=>a(B)&&a(B)(...n)),class:"btn-reset"},s[10]||(s[10]=[t("span",null,"ðŸ”„",-1),ne(" Reset")]))):U("",!0),t("button",{class:g(["btn-toggle",{active:a(m)}]),onClick:s[5]||(s[5]=n=>m.value=!a(m))},u(a(m)?"Last 100":"All Records"),3)]),t("div",Be,[t("span",Le,u(a(k).length),1),s[11]||(s[11]=t("span",{class:"result-label"},"websites found",-1))])])])]))}},Fe=Z(Ge,[["__scopeId","data-v-d148d282"]]);export{Fe as default};
