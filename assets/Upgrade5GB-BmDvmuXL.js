import{a as v}from"./axios-B2YOV0tR.js";import{_ as f,c as n,e as i,k as m,F as S,f as u,w as c,v as w,o as a,n as h,l as p,t as g}from"./index-DjeDXeIc.js";import{_ as N}from"./search-Cu_kMHqT.js";const A={data(){return{currentSites:[],waitingSites:[],completeSites:[],selectedCurrentSiteNames:[],selectedWaitingSiteNames:[],selectedCompleteSiteNames:[],newCurrentSite:"",searchQuery:""}},computed:{sortedCurrentSites(){return[...this.currentSites].sort((e,t)=>new Date(e.addedAt)-new Date(t.addedAt))},sortedWaitingSites(){return[...this.waitingSites].sort((e,t)=>new Date(e.addedAt)-new Date(t.addedAt))},sortedCompleteSites(){return[...this.completeSites].sort((e,t)=>new Date(e.addedAt)-new Date(t.addedAt))},filteredCurrentSites(){return this.sortedCurrentSites.filter(this.matchesSearch)},filteredWaitingSites(){return this.sortedWaitingSites.filter(this.matchesSearch)},filteredCompleteSites(){return this.sortedCompleteSites.filter(this.matchesSearch)},isAllCurrentSelected(){return this.currentSites.length>0&&this.selectedCurrentSiteNames.length===this.currentSites.length},isAllWaitingSelected(){return this.waitingSites.length>0&&this.selectedWaitingSiteNames.length===this.waitingSites.length},isAllCompleteSelected(){return this.completeSites.length>0&&this.selectedCompleteSiteNames.length===this.completeSites.length}},watch:{currentSites:{handler(e){localStorage.setItem("promoApp_currentSites",JSON.stringify(e))},deep:!0},waitingSites:{handler(e){localStorage.setItem("promoApp_waitingSites",JSON.stringify(e))},deep:!0},completeSites:{handler(e){localStorage.setItem("promoApp_completeSites",JSON.stringify(e))},deep:!0}},mounted(){const e=localStorage.getItem("promoApp_currentSites"),t=localStorage.getItem("promoApp_waitingSites"),r=localStorage.getItem("promoApp_completeSites");e!==null||t!==null||r!==null?(console.log("Loading data from localStorage."),this.currentSites=(JSON.parse(e)||[]).filter(l=>l&&l.name),this.waitingSites=(JSON.parse(t)||[]).filter(l=>l&&l.name),this.completeSites=(JSON.parse(r)||[]).filter(l=>l&&l.name)):(console.log("No localStorage data. Loading from server."),v.get("http://localhost:3001/data").then(l=>{const d=l.data;this.currentSites=d.Current||[],this.waitingSites=d.Waiting||[],this.completeSites=d.Complete||[]}).catch(l=>{console.error("Error loading from server:",l)}))},methods:{matchesSearch(e){const t=this.searchQuery.toLowerCase();return e.name.toLowerCase().includes(t)||e.note&&e.note.toLowerCase().includes(t)||e.status&&e.status.toLowerCase().includes(t)},isMatch(e){return this.searchQuery&&e.toLowerCase().includes(this.searchQuery.toLowerCase())},toggleSelectAll(e){switch(e){case"current":this.selectedCurrentSiteNames=this.isAllCurrentSelected?[]:this.currentSites.map(t=>t.name);break;case"waiting":this.selectedWaitingSiteNames=this.isAllWaitingSelected?[]:this.waitingSites.map(t=>t.name);break;case"complete":this.selectedCompleteSiteNames=this.isAllCompleteSelected?[]:this.completeSites.map(t=>t.name);break}},_moveSelectedItems(e,t,r){const l=this[r];if(l.length===0)return;const C=this[e].filter(s=>l.includes(s.name)).filter(s=>!this[t].some(o=>o.name===s.name));this[t].push(...C),this[e]=this[e].filter(s=>!l.includes(s.name)),this[r]=[]},moveSelectedFromCurrentToWaiting(){this._moveSelectedItems("currentSites","waitingSites","selectedCurrentSiteNames"),this.syncToServer()},moveSelectedFromWaitingToCurrent(){this._moveSelectedItems("waitingSites","currentSites","selectedWaitingSiteNames"),this.syncToServer()},moveSelectedFromWaitingToComplete(){this._moveSelectedItems("waitingSites","completeSites","selectedWaitingSiteNames"),this.syncToServer()},moveSelectedFromCompleteToWaiting(){this._moveSelectedItems("completeSites","waitingSites","selectedCompleteSiteNames"),this.syncToServer()},clearSelectedFromAll(){this.currentSites=this.currentSites.filter(e=>!this.selectedCurrentSiteNames.includes(e.name)),this.waitingSites=this.waitingSites.filter(e=>!this.selectedWaitingSiteNames.includes(e.name)),this.completeSites=this.completeSites.filter(e=>!this.selectedCompleteSiteNames.includes(e.name)),this.selectedCurrentSiteNames=[],this.selectedWaitingSiteNames=[],this.selectedCompleteSiteNames=[],this.syncToServer()},addNewCurrentSite(){const e=this.newCurrentSite.trim().toLowerCase(),t=[...this.currentSites,...this.waitingSites,...this.completeSites].map(r=>r.name.toLowerCase());e&&!t.includes(e)&&(this.currentSites.push({name:e,addedAt:new Date().toISOString()}),this.newCurrentSite="",this.syncToServer())},syncToServer(){const e={Current:this.currentSites,Waiting:this.waitingSites,Complete:this.completeSites};v.post("http://localhost:3001/update-data",e).then(()=>{console.log("Data synced to server.")}).catch(t=>{console.error("Sync failed:",t)})}}},k={...A},W={class:"websiteTrack"},b={class:"CurrentCard"},y={class:"list-title"},T={class:"selectAll"},F=["checked"],L={class:"list-group"},I=["value","id"],D=["for"],O={class:"add-box"},V={class:"group-btn"},$={class:"switchControl"},B={class:"WaitingCard"},J={class:"list-title"},M={class:"selectAll"},Q=["checked"],U={class:"list-group"},E=["value","id"],P=["for"],q={id:"search-form"},z={class:"switchControl"},G={class:"CompleteCard"},j={class:"list-title"},H={class:"selectAll"},K=["checked"],R={class:"list-group"},X=["value","id"],Y=["for"],Z={class:"group-btn"};function _(e,t,r,l,d,C){return a(),n("div",W,[i("div",b,[i("div",y,[t[17]||(t[17]=m(" Current Card ")),i("div",T,[i("input",{type:"checkbox",checked:e.isAllCurrentSelected,onChange:t[0]||(t[0]=s=>e.toggleSelectAll("current")),id:"select-all-current"},null,40,F),t[16]||(t[16]=i("div",{for:"select-all-current"},"Select All",-1))])]),i("div",L,[(a(!0),n(S,null,u(e.sortedCurrentSites,s=>(a(),n("div",{key:"current-"+s.name,class:h(["list-item",{highlighted:e.isMatch(s.name)}])},[c(i("input",{type:"checkbox",value:s.name,"onUpdate:modelValue":t[1]||(t[1]=o=>e.selectedCurrentSiteNames=o),id:"current-"+(s.name||"").replace(/\./g,"-")},null,8,I),[[p,e.selectedCurrentSiteNames]]),i("div",{for:"current-"+(s.name||"").replace(/\./g,"-")},g(s.name),9,D)],2))),128))]),i("form",O,[c(i("input",{"onUpdate:modelValue":t[2]||(t[2]=s=>e.newCurrentSite=s),placeholder:"Enter new site"},null,512),[[w,e.newCurrentSite]]),i("div",V,[i("button",{class:"add-btn",onClick:t[3]||(t[3]=(...s)=>e.addNewCurrentSite&&e.addNewCurrentSite(...s))},"Add"),i("button",{class:"clear-btn",onClick:t[4]||(t[4]=(...s)=>e.clearSelectedFromAll&&e.clearSelectedFromAll(...s))},"Clear Select")])])]),i("div",$,[i("button",{class:"PrevSwap",onClick:t[5]||(t[5]=(...s)=>e.moveSelectedFromCurrentToWaiting&&e.moveSelectedFromCurrentToWaiting(...s))},"Forward"),i("button",{class:"NextSwap",onClick:t[6]||(t[6]=(...s)=>e.moveSelectedFromWaitingToCurrent&&e.moveSelectedFromWaitingToCurrent(...s))},"Back")]),i("div",B,[i("div",J,[t[19]||(t[19]=m(" Waiting Card ")),i("div",M,[i("input",{type:"checkbox",checked:e.isAllWaitingSelected,onChange:t[7]||(t[7]=s=>e.toggleSelectAll("waiting")),id:"select-all-waiting"},null,40,Q),t[18]||(t[18]=i("div",{for:"select-all-waiting"},"Select All",-1))])]),i("div",U,[(a(!0),n(S,null,u(e.sortedWaitingSites,s=>(a(),n("div",{key:"waiting-"+s.name,class:h(["list-item",{highlighted:e.isMatch(s.name)}])},[c(i("input",{type:"checkbox",value:s.name,"onUpdate:modelValue":t[8]||(t[8]=o=>e.selectedWaitingSiteNames=o),id:"waiting-"+(s.name||"").replace(/\./g,"-")},null,8,E),[[p,e.selectedWaitingSiteNames]]),i("div",{for:"waiting-"+(s.name||"").replace(/\./g,"-")},g(s.name),9,P)],2))),128))]),i("form",q,[c(i("input",{class:"search-input",type:"search","onUpdate:modelValue":t[9]||(t[9]=s=>e.searchQuery=s),placeholder:"Search Website"},null,512),[[w,e.searchQuery]]),t[20]||(t[20]=i("img",{src:N,alt:"",width:"100%",height:"100%"},null,-1))])]),i("div",z,[i("button",{class:"PrevSwap",onClick:t[10]||(t[10]=(...s)=>e.moveSelectedFromWaitingToComplete&&e.moveSelectedFromWaitingToComplete(...s))},"Forward"),i("button",{class:"NextSwap",onClick:t[11]||(t[11]=(...s)=>e.moveSelectedFromCompleteToWaiting&&e.moveSelectedFromCompleteToWaiting(...s))},"Back")]),i("div",G,[i("div",j,[t[22]||(t[22]=m(" Complete Card ")),i("div",H,[i("input",{type:"checkbox",checked:e.isAllCompleteSelected,onChange:t[12]||(t[12]=s=>e.toggleSelectAll("complete")),id:"select-all-complete"},null,40,K),t[21]||(t[21]=i("div",{for:"select-all-complete"},"Select All",-1))])]),i("div",R,[(a(!0),n(S,null,u(e.sortedCompleteSites,s=>(a(),n("div",{key:"complete-"+s.name,class:h(["list-item",{highlighted:e.isMatch(s.name)}])},[c(i("input",{type:"checkbox",value:s.name,"onUpdate:modelValue":t[13]||(t[13]=o=>e.selectedCompleteSiteNames=o),id:"complete-"+(s.name||"").replace(/\./g,"-")},null,8,X),[[p,e.selectedCompleteSiteNames]]),i("div",{for:"complete-"+(s.name||"").replace(/\./g,"-")},g(s.name),9,Y)],2))),128))]),i("div",Z,[i("button",{class:"add-btn",onClick:t[14]||(t[14]=(...s)=>e.addNewCurrentSite&&e.addNewCurrentSite(...s))},"Add"),i("button",{class:"clear-btn",onClick:t[15]||(t[15]=(...s)=>e.clearSelectedFromAll&&e.clearSelectedFromAll(...s))},"Clear Select")])])])}const se=f(k,[["render",_],["__scopeId","data-v-bb73525d"]]);export{se as default};
