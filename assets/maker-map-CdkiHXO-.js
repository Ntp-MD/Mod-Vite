import{_ as E,r,g as N,c as f,a as l,F as b,k as T,l as C,m as g,v as k,o as M,n as D,y as I,t as z}from"./index-DvDUzVfj.js";const B={class:"map_layout"},q=["onMousedown"],J=["onClick"],O={__name:"maker-map",setup(V){const o=r([]),u=r(""),i=r(50),m=r(50);N(()=>{const a=localStorage.getItem("mapMarkers");if(a)try{o.value=JSON.parse(a)}catch{}});function L(){u.value&&(o.value.push({name:u.value,top:i.value,left:m.value}),localStorage.setItem("mapMarkers",JSON.stringify(o.value)),u.value="",i.value=75,m.value=25)}function h(a){o.value.splice(a,1),localStorage.setItem("mapMarkers",JSON.stringify(o.value))}let s=r(null),v=r({x:0,y:0}),y=r(null),p=null,d=!1;function w(a,e){d=!1,p=setTimeout(()=>{d=!0,s.value=e;const n=a.target.closest("mark").getBoundingClientRect();v.value={x:a.clientX-n.left,y:a.clientY-n.top},document.addEventListener("mousemove",S),document.addEventListener("mouseup",x)},10),document.addEventListener("mouseup",c)}function c(){clearTimeout(p),document.removeEventListener("mouseup",c)}function S(a){if(!d||s.value===null)return;const e=y.value.getBoundingClientRect();let t=(a.clientX-e.left-v.value.x)/e.width*100,n=(a.clientY-e.top-v.value.y)/e.height*100;t=Math.max(0,Math.min(100,t)),n=Math.max(0,Math.min(100,n)),o.value[s.value].left=t,o.value[s.value].top=n}function x(){clearTimeout(p),d=!1,s.value=null,document.removeEventListener("mousemove",S),document.removeEventListener("mouseup",x),document.removeEventListener("mouseup",c),localStorage.setItem("mapMarkers",JSON.stringify(o.value))}return(a,e)=>(M(),f(b,null,[e[6]||(e[6]=l("div",{class:"labelName"},"Map Marker",-1)),l("div",B,[l("div",{class:"map_content",ref_key:"map",ref:y},[e[4]||(e[4]=l("img",{src:"https://itp1.itopfile.com/ImageServer/z_itp_12052025qsdh/0/0/white-mapz-z1584138795656.png",alt:""},null,-1)),(M(!0),f(b,null,T(o.value,(t,n)=>(M(),f("mark",{key:t.name+n,class:D(t.name),style:I({top:t.top+"%",left:t.left+"%"})},[e[3]||(e[3]=l("div",{class:"mark"},null,-1)),l("label",{onMousedown:_=>w(_,n)},z(t.name),41,q),l("div",{onClick:_=>h(n),style:{"margin-left":"5px"}},"x",8,J)],6))),128))],512),l("div",{class:"map_control",onSubmit:C(L,["prevent"])},[g(l("input",{"onUpdate:modelValue":e[0]||(e[0]=t=>u.value=t),placeholder:"Country name",required:""},null,512),[[k,u.value]]),g(l("input",{hidden:"","onUpdate:modelValue":e[1]||(e[1]=t=>i.value=t),type:"number",min:"0",max:"100",placeholder:"Top (%)",required:""},null,512),[[k,i.value,void 0,{number:!0}]]),g(l("input",{hidden:"","onUpdate:modelValue":e[2]||(e[2]=t=>m.value=t),type:"number",min:"0",max:"100",placeholder:"Left (%)",required:""},null,512),[[k,m.value,void 0,{number:!0}]]),e[5]||(e[5]=l("button",{type:"submit"},"Add Marker",-1))],32)])],64))}},U=E(O,[["__scopeId","data-v-f03b9e50"]]);export{U as default};
