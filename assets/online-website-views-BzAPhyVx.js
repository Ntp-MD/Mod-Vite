import{u as X,r as b,f as h,w as H,g as Z,A as K,B as ee,_ as te,c as o,a as t,i as a,j as se,F as L,k as w,l as ne,m as le,v as ae,p as ie,n as _,x as D,t as r,o as i}from"./index-DvDUzVfj.js";import{u as oe,a as re,P as ue}from"./useLoading-DhY661q_.js";import{u as ce}from"./useLoading-CIm6zIl6.js";import de from"./loading-BmNfvv3A.js";const fe=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function ge(){const{showLoading:z,hideLoading:I}=oe(),W=X(),C=new AbortController,v=b([]),S=b(0),k=b(0),N=b(""),m=b(""),y=b(null),O=b(!1),Y="https://corsproxy.io/?"+encodeURIComponent("https://docs.google.com/spreadsheets/d/e/2PACX-1vRbhLBcw4jg80ogDxEeLs5wRrsQdFrWoN0g8OGy3aO_YJ0UoL-BIhuY8EozSzuTXppIIbfqp100FYIZ/pub?gid=1419480009&single=true&output=csv"),x=h(()=>{const e=new Set;return v.value.forEach(l=>{l.onlineYear>0&&e.add(l.onlineYear)}),Array.from(e).sort((l,f)=>f-l)}),E=h(()=>S.value!==0||k.value!==0||m.value!=="");function T(){S.value=0,k.value=0,N.value="",m.value=""}let A=null;H(N,e=>{clearTimeout(A),A=setTimeout(()=>m.value=(e||"").toLowerCase().trim(),200)});const d=e=>String(e??"").trim(),B=e=>d(e).toLowerCase();function $(e,l){const f=Number(d(e.Month))||0,c=d(e.Name),V=d(e.OnlineDate);let q=0;const Q=V.match(/\d{4}/);return Q&&(q=Number(Q[0])),{id:l,selectName:c,selectOnlineDate:V,selectfree5GB:d(e.Free5GB),selectfreeSearchConsole:d(e.FreeSearchConsole),selectfreeSmartWidget:d(e.FreeSmartWidget),onlineSearchConsole:d(e.OnlineSearchConsole),onlineSmartWidget:d(e.OnlineSmartWidget),Check5GB:d(e.Check5GB),onlineMonth:f,onlineYear:q,_name_lc:B(e.Name),_5gb_lc:B(e.Free5GB),_sc_lc:B(e.FreeSearchConsole),_sw_lc:B(e.FreeSmartWidget)}}async function U(){z();try{const e=await re.get(Y,{responseType:"text",signal:C.signal});ue.parse(e.data,{header:!0,skipEmptyLines:!0,complete:({data:l})=>{let f=1;v.value=l.filter(c=>c==null?void 0:c.Name).map(c=>$(c,f++)),I()}})}catch{v.value=[],I()}}const p=h(()=>{const e=S.value,l=k.value,f=m.value;return e===0&&l===0&&!f?v.value:v.value.filter(c=>!(e===0||c.onlineYear===e)||!(l===0||c.onlineMonth===l)?!1:f?c._name_lc.includes(f)||c._5gb_lc.includes(f)||c._sc_lc.includes(f)||c._sw_lc.includes(f):!0)}),g=h(()=>{const e=p.value;return O.value?e.slice(-100):e}),F=h(()=>p.value.filter(e=>e.selectfree5GB==="à¹€à¸žà¸´à¹ˆà¸¡à¸žà¸·à¹‰à¸™à¸—à¸µà¹ˆ (5 GB)"&&!e.Check5GB).length),M=h(()=>p.value.filter(e=>e.selectfreeSearchConsole&&(!e.onlineSearchConsole||e.onlineSearchConsole==="Wait")).length),R=h(()=>p.value.filter(e=>e.selectfreeSmartWidget==="Smart Widget"&&e.onlineSmartWidget!=="Installed").length);function u(){y.value&&p.value.length>15&&y.value.scrollIntoView({behavior:"smooth",block:"end"})}H(p,()=>ee(u));function s(e){const l=e.selectfree5GB==="à¹€à¸žà¸´à¹ˆà¸¡à¸žà¸·à¹‰à¸™à¸—à¸µà¹ˆ (5 GB)";return!l&&!e.Check5GB?"NoService":l&&e.Check5GB==="Completed"?"Installed":l&&!e.Check5GB?"Wait":""}function n(e){return!e.selectfree5GB&&!e.Check5GB?"à¹„à¸¡à¹ˆà¸¡à¸µà¸šà¸£à¸´à¸à¸²à¸£":e.selectfree5GB||"à¹€à¸žà¸´à¹ˆà¸¡à¸žà¸·à¹‰à¸™à¸—à¸µà¹ˆ (5 GB)"}function G(e){return e.onlineSearchConsole==="Installed"?"Installed":!e.onlineSearchConsole||e.onlineSearchConsole==="Wait"?"Wait":""}function J(e){const l=e.onlineSearchConsole;return!l||l==="Wait"?"Search Console":l==="Installed"?"Search Console Installed":e.selectfreeSearchConsole||"Search Console"}function P(e){const l=e.onlineSmartWidget;return l==="Installed"||e.selectfreeSmartWidget==="Smart Widget"?"Installed":l==="Google Ads"?"Ads":l==="à¹„à¸¡à¹ˆà¸¡à¸µà¸šà¸£à¸´à¸à¸²à¸£"?"NoService":l==="Wait"?"Wait":""}function j(e){const l=e.onlineSmartWidget;return l==="à¹„à¸¡à¹ˆà¸¡à¸µà¸šà¸£à¸´à¸à¸²à¸£"?"à¹„à¸¡à¹ˆà¸¡à¸µà¸šà¸£à¸´à¸à¸²à¸£":l==="Google Ads"?"Google Ads":l==="Installed"?"Smart Widget Installed":l==="Wait"&&(e.selectfreeSmartWidget==="Smart Widget"||!e.selectfreeSmartWidget)?"Smart Widget":e.selectfreeSmartWidget||"Smart Widget"}return Z(()=>{U(),u()}),K(()=>C.abort()),{MONTH_NAMES:fe,ui:W,sheetRows:v,selectedYear:S,selectedMonth:k,searchQuery:N,debouncedQuery:m,bottom:y,showLast100:O,availableYears:x,hasActiveFilters:E,filteredRows:p,displayedRows:g,resetFilters:T,scrollToBottom:u,free5gbClass:s,free5gbLabel:n,searchConsoleClass:G,searchConsoleLabel:J,smartWidgetClass:P,smartWidgetLabel:j,waitingSpace5GB:F,waitingSearchConsole:M,waitingSmartWidget:R}}const ve={class:"table-view-container"},me={class:"table-views"},he={key:1},Se={class:"filter-sidebar"},pe={class:"filter-section"},_e={class:"filter-group"},be={class:"filter-group"},Ce={class:"filter-options"},We=["onClick"],ke={class:"filter-group"},ye={class:"filter-options"},Be=["onClick"],Ge={class:"filter-actions"},Le={class:"results-summary"},we={class:"result-count"},Ne={class:"filter-group",style:{"margin-top":"var(--gap2)"}},Oe={class:"waiting-stats"},Ie={class:"waiting-stat__info"},Ae={class:"waiting-stat__count"},Fe={key:0,class:"waiting-list"},Me={class:"waiting-stat__info"},Re={class:"waiting-stat__count"},De={key:1,class:"waiting-list"},Ye={class:"waiting-stat__info"},xe={class:"waiting-stat__count"},Ee={key:2,class:"waiting-list"},Te={__name:"online-website-views",setup(z){const{MONTH_NAMES:I,selectedYear:W,selectedMonth:C,searchQuery:v,showLast100:S,availableYears:k,hasActiveFilters:N,filteredRows:m,displayedRows:y,resetFilters:O,free5gbClass:Y,free5gbLabel:x,searchConsoleClass:E,searchConsoleLabel:T,smartWidgetClass:A,smartWidgetLabel:d,waitingSpace5GB:B,waitingSearchConsole:$,waitingSmartWidget:U}=ge(),{isLoading:p}=ce({duration:5e3,waitForData:y}),g=b(""),F=h(()=>(m.value||[]).filter(u=>u.selectfree5GB==="à¹€à¸žà¸´à¹ˆà¸¡à¸žà¸·à¹‰à¸™à¸—à¸µà¹ˆ (5 GB)"&&!u.Check5GB)),M=h(()=>(m.value||[]).filter(u=>u.selectfreeSearchConsole&&(!u.onlineSearchConsole||u.onlineSearchConsole==="Wait"))),R=h(()=>(m.value||[]).filter(u=>u.selectfreeSmartWidget==="Smart Widget"&&u.onlineSmartWidget!=="Installed"));return(u,s)=>(i(),o("div",ve,[t("div",me,[a(p)?(i(),se(de,{key:0})):(i(),o("table",he,[s[9]||(s[9]=t("thead",null,[t("tr",null,[t("th",null,"Date"),t("th",null,"Website Name"),t("th",null,"Space 5GB"),t("th",null,"Search Console"),t("th",null,"Smart Widget")])],-1)),t("tbody",null,[(i(!0),o(L,null,w(a(y),n=>(i(),o("tr",{key:n.id},[t("td",null,r(n.selectOnlineDate),1),t("td",null,r(n.selectName),1),t("td",{class:_(["hasStatus",a(Y)(n)])},r(a(x)(n)),3),t("td",{class:_(["hasStatus",a(E)(n)])},r(a(T)(n)),3),t("td",{class:_(["hasStatus",a(A)(n)])},r(a(d)(n)),3)]))),128))])]))]),t("div",Se,[t("div",pe,[s[21]||(s[21]=t("div",{class:"filter-title"},"Filters",-1)),t("div",_e,[s[10]||(s[10]=t("label",{class:"filter-label"},"Search",-1)),t("form",{onSubmit:s[1]||(s[1]=ne(()=>{},["prevent"]))},[le(t("input",{type:"search",class:"search-input",placeholder:"Search website...","onUpdate:modelValue":s[0]||(s[0]=n=>ie(v)?v.value=n:null),autocomplete:"off"},null,512),[[ae,a(v)]])],32)]),t("div",be,[s[11]||(s[11]=t("label",{class:"filter-label"},"Year",-1)),t("div",Ce,[t("button",{class:_({active:a(W)===0}),onClick:s[2]||(s[2]=n=>W.value=0)},"All",2),(i(!0),o(L,null,w(a(k),n=>(i(),o("button",{key:n,class:_({active:a(W)===n}),onClick:G=>W.value=n},r(n),11,We))),128))])]),t("div",ke,[s[12]||(s[12]=t("label",{class:"filter-label"},"Month",-1)),t("div",ye,[t("button",{class:_({active:a(C)===0}),onClick:s[3]||(s[3]=n=>C.value=0)},"All",2),(i(!0),o(L,null,w(a(I),(n,G)=>(i(),o("button",{key:G+1,class:_({active:a(C)===G+1}),onClick:J=>C.value=G+1},r(n),11,Be))),128))])]),t("div",Ge,[a(N)?(i(),o("button",{key:0,onClick:s[4]||(s[4]=(...n)=>a(O)&&a(O)(...n)),class:"btn-reset"},"Reset")):D("",!0),t("button",{class:_(["btn-toggle",{active:a(S)}]),onClick:s[5]||(s[5]=n=>S.value=!a(S))},r(a(S)?"Last 100":"All Records"),3)]),t("div",Le,[t("span",we,r(a(m).length),1),s[13]||(s[13]=t("span",{class:"result-label"},"websites found",-1))]),t("div",Ne,[s[20]||(s[20]=t("label",{class:"filter-label"},"à¸£à¸­à¸”à¸³à¹€à¸™à¸´à¸™à¸à¸²à¸£",-1)),t("div",Oe,[t("div",{class:"waiting-stat",onClick:s[6]||(s[6]=n=>g.value=g.value==="5gb"?"":"5gb"),style:{cursor:"pointer"}},[s[15]||(s[15]=t("span",{class:"waiting-stat__icon"},"ðŸ“¦",-1)),t("div",Ie,[s[14]||(s[14]=t("span",{class:"waiting-stat__label"},"à¹€à¸žà¸´à¹ˆà¸¡à¸žà¸·à¹‰à¸™à¸—à¸µà¹ˆ 5GB",-1)),t("span",Ae,r(a(B)),1)])]),g.value==="5gb"&&F.value.length?(i(),o("div",Fe,[t("ul",null,[(i(!0),o(L,null,w(F.value,n=>(i(),o("li",{key:n.id},r(n.selectName)+" ("+r(n.selectOnlineDate)+")",1))),128))])])):D("",!0),t("div",{class:"waiting-stat",onClick:s[7]||(s[7]=n=>g.value=g.value==="sc"?"":"sc"),style:{cursor:"pointer"}},[s[17]||(s[17]=t("span",{class:"waiting-stat__icon"},"ðŸ”",-1)),t("div",Me,[s[16]||(s[16]=t("span",{class:"waiting-stat__label"},"Search Console",-1)),t("span",Re,r(a($)),1)])]),g.value==="sc"&&M.value.length?(i(),o("div",De,[t("ul",null,[(i(!0),o(L,null,w(M.value,n=>(i(),o("li",{key:n.id},r(n.selectName)+" ("+r(n.selectOnlineDate)+")",1))),128))])])):D("",!0),t("div",{class:"waiting-stat",onClick:s[8]||(s[8]=n=>g.value=g.value==="sw"?"":"sw"),style:{cursor:"pointer"}},[s[19]||(s[19]=t("span",{class:"waiting-stat__icon"},"ðŸ”§",-1)),t("div",Ye,[s[18]||(s[18]=t("span",{class:"waiting-stat__label"},"Smart Widget",-1)),t("span",xe,r(a(U)),1)])]),g.value==="sw"&&R.value.length?(i(),o("div",Ee,[t("ul",null,[(i(!0),o(L,null,w(R.value,n=>(i(),o("li",{key:n.id},r(n.selectName)+" ("+r(n.selectOnlineDate)+")",1))),128))])])):D("",!0)])])])])]))}},ze=te(Te,[["__scopeId","data-v-4b90a239"]]);export{ze as default};
