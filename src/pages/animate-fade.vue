<style>
.content {
  margin-bottom: 30px;
  width: 70%;
  margin: 0 auto 50px;
}

.test {
  height: 50vw;
  overflow-y: scroll;
}
</style>

<template>
  <div class="test">
    <div class="content">
      Lorem ipsum dolor sit amet consectetur, adipisicing elit. Dolorem distinctio, natus voluptates corrupti similique illum obcaecati aut debitis
      vel ipsam impedit rem ratione amet. Dolores dicta sed vel ipsum commodi. Error commodi molestiae distinctio explicabo eligendi blanditiis
      possimus architecto excepturi officiis inventore incidunt laboriosam recusandae repudiandae natus eveniet repellendus consequuntur aliquid,
      dolor nam pariatur culpa, dignissimos nemo? Laboriosam, corrupti esse! Rerum, minima. Assumenda repellat enim debitis earum recusandae,
      doloremque autem labore at non nulla vitae deleniti cumque suscipit beatae, quas dignissimos quasi pariatur iusto! Sapiente sequi molestias illo
      mollitia deleniti debitis, itaque voluptate aperiam dicta autem eveniet beatae, velit aliquam nemo. Temporibus corporis a eius ad alias,
      blanditiis nobis nisi accusantium impedit eligendi neque maxime debitis fugiat facilis? Minus ea quo provident distinctio magnam inventore
      possimus, ipsa quisquam necessitatibus? Necessitatibus, vitae non sed ipsam exercitationem corrupti quod enim nulla. Cum dolorem architecto hic
      deleniti eaque veniam ducimus, soluta voluptate tempora corrupti numquam animi placeat inventore vitae assumenda similique molestias culpa
      obcaecati nulla magnam maiores eos illum aperiam! Unde necessitatibus quas culpa velit totam doloremque fugiat voluptatum sapiente, quis iste ex
      labore, eos eius? Nemo, reiciendis blanditiis. Pariatur ipsum nihil, voluptatibus eligendi rerum architecto vero! Voluptatibus corporis nisi non
      repellat fugit, ipsum exercitationem quam dignissimos soluta eum ullam vel doloribus error atque. Natus minima assumenda quae neque harum iure,
      fuga, debitis soluta veritatis numquam minus incidunt, ab omnis velit necessitatibus rerum dolores saepe excepturi eos? Labore voluptas tempore
      fuga odio aut eum, dicta harum rem et sunt itaque placeat culpa sit a sapiente magni voluptate nostrum nulla nihil! Ut suscipit ad numquam saepe
      porro voluptatem maxime eius earum corrupti. Inventore totam, est consectetur tempore id quia repellat pariatur, ipsum vero nulla quam sit
      sapiente ea cum. Ex, dignissimos? Officia repudiandae earum veritatis eius voluptatibus molestiae, assumenda facilis consequatur nihil natus
      vero.
    </div>
    <div class="content">
      Lorem ipsum dolor sit amet consectetur, adipisicing elit. Dolorem distinctio, natus voluptates corrupti similique illum obcaecati aut debitis
      vel ipsam impedit rem ratione amet. Dolores dicta sed vel ipsum commodi. Error commodi molestiae distinctio explicabo eligendi blanditiis
      possimus architecto excepturi officiis inventore incidunt laboriosam recusandae repudiandae natus eveniet repellendus consequuntur aliquid,
      dolor nam pariatur culpa, dignissimos nemo? Laboriosam, corrupti esse! Rerum, minima. Assumenda repellat enim debitis earum recusandae,
      doloremque autem labore at non nulla vitae deleniti cumque suscipit beatae, quas dignissimos quasi pariatur iusto! Sapiente sequi molestias illo
      mollitia deleniti debitis, itaque voluptate aperiam dicta autem eveniet beatae, velit aliquam nemo. Temporibus corporis a eius ad alias,
      blanditiis nobis nisi accusantium impedit eligendi neque maxime debitis fugiat facilis? Minus ea quo provident distinctio magnam inventore
      possimus, ipsa quisquam necessitatibus? Necessitatibus, vitae non sed ipsam exercitationem corrupti quod enim nulla. Cum dolorem architecto hic
      deleniti eaque veniam ducimus, soluta voluptate tempora corrupti numquam animi placeat inventore vitae assumenda similique molestias culpa
      obcaecati nulla magnam maiores eos illum aperiam! Unde necessitatibus quas culpa velit totam doloremque fugiat voluptatum sapiente, quis iste ex
      labore, eos eius? Nemo, reiciendis blanditiis. Pariatur ipsum nihil, voluptatibus eligendi rerum architecto vero! Voluptatibus corporis nisi non
      repellat fugit, ipsum exercitationem quam dignissimos soluta eum ullam vel doloribus error atque. Natus minima assumenda quae neque harum iure,
      fuga, debitis soluta veritatis numquam minus incidunt, ab omnis velit necessitatibus rerum dolores saepe excepturi eos? Labore voluptas tempore
      fuga odio aut eum, dicta harum rem et sunt itaque placeat culpa sit a sapiente magni voluptate nostrum nulla nihil! Ut suscipit ad numquam saepe
      porro voluptatem maxime eius earum corrupti. Inventore totam, est consectetur tempore id quia repellat pariatur, ipsum vero nulla quam sit
      sapiente ea cum. Ex, dignissimos? Officia repudiandae earum veritatis eius voluptatibus molestiae, assumenda facilis consequatur nihil natus
      vero.
    </div>
    <div class="content">
      Lorem ipsum dolor sit amet consectetur, adipisicing elit. Dolorem distinctio, natus voluptates corrupti similique illum obcaecati aut debitis
      vel ipsam impedit rem ratione amet. Dolores dicta sed vel ipsum commodi. Error commodi molestiae distinctio explicabo eligendi blanditiis
      possimus architecto excepturi officiis inventore incidunt laboriosam recusandae repudiandae natus eveniet repellendus consequuntur aliquid,
      dolor nam pariatur culpa, dignissimos nemo? Laboriosam, corrupti esse! Rerum, minima. Assumenda repellat enim debitis earum recusandae,
      doloremque autem labore at non nulla vitae deleniti cumque suscipit beatae, quas dignissimos quasi pariatur iusto! Sapiente sequi molestias illo
      mollitia deleniti debitis, itaque voluptate aperiam dicta autem eveniet beatae, velit aliquam nemo. Temporibus corporis a eius ad alias,
      blanditiis nobis nisi accusantium impedit eligendi neque maxime debitis fugiat facilis? Minus ea quo provident distinctio magnam inventore
      possimus, ipsa quisquam necessitatibus? Necessitatibus, vitae non sed ipsam exercitationem corrupti quod enim nulla. Cum dolorem architecto hic
      deleniti eaque veniam ducimus, soluta voluptate tempora corrupti numquam animi placeat inventore vitae assumenda similique molestias culpa
      obcaecati nulla magnam maiores eos illum aperiam! Unde necessitatibus quas culpa velit totam doloremque fugiat voluptatum sapiente, quis iste ex
      labore, eos eius? Nemo, reiciendis blanditiis. Pariatur ipsum nihil, voluptatibus eligendi rerum architecto vero! Voluptatibus corporis nisi non
      repellat fugit, ipsum exercitationem quam dignissimos soluta eum ullam vel doloribus error atque. Natus minima assumenda quae neque harum iure,
      fuga, debitis soluta veritatis numquam minus incidunt, ab omnis velit necessitatibus rerum dolores saepe excepturi eos? Labore voluptas tempore
      fuga odio aut eum, dicta harum rem et sunt itaque placeat culpa sit a sapiente magni voluptate nostrum nulla nihil! Ut suscipit ad numquam saepe
      porro voluptatem maxime eius earum corrupti. Inventore totam, est consectetur tempore id quia repellat pariatur, ipsum vero nulla quam sit
      sapiente ea cum. Ex, dignissimos? Officia repudiandae earum veritatis eius voluptatibus molestiae, assumenda facilis consequatur nihil natus
      vero.
    </div>
    <div class="content">
      Lorem ipsum dolor sit amet consectetur, adipisicing elit. Dolorem distinctio, natus voluptates corrupti similique illum obcaecati aut debitis
      vel ipsam impedit rem ratione amet. Dolores dicta sed vel ipsum commodi. Error commodi molestiae distinctio explicabo eligendi blanditiis
      possimus architecto excepturi officiis inventore incidunt laboriosam recusandae repudiandae natus eveniet repellendus consequuntur aliquid,
      dolor nam pariatur culpa, dignissimos nemo? Laboriosam, corrupti esse! Rerum, minima. Assumenda repellat enim debitis earum recusandae,
      doloremque autem labore at non nulla vitae deleniti cumque suscipit beatae, quas dignissimos quasi pariatur iusto! Sapiente sequi molestias illo
      mollitia deleniti debitis, itaque voluptate aperiam dicta autem eveniet beatae, velit aliquam nemo. Temporibus corporis a eius ad alias,
      blanditiis nobis nisi accusantium impedit eligendi neque maxime debitis fugiat facilis? Minus ea quo provident distinctio magnam inventore
      possimus, ipsa quisquam necessitatibus? Necessitatibus, vitae non sed ipsam exercitationem corrupti quod enim nulla. Cum dolorem architecto hic
      deleniti eaque veniam ducimus, soluta voluptate tempora corrupti numquam animi placeat inventore vitae assumenda similique molestias culpa
      obcaecati nulla magnam maiores eos illum aperiam! Unde necessitatibus quas culpa velit totam doloremque fugiat voluptatum sapiente, quis iste ex
      labore, eos eius? Nemo, reiciendis blanditiis. Pariatur ipsum nihil, voluptatibus eligendi rerum architecto vero! Voluptatibus corporis nisi non
      repellat fugit, ipsum exercitationem quam dignissimos soluta eum ullam vel doloribus error atque. Natus minima assumenda quae neque harum iure,
      fuga, debitis soluta veritatis numquam minus incidunt, ab omnis velit necessitatibus rerum dolores saepe excepturi eos? Labore voluptas tempore
      fuga odio aut eum, dicta harum rem et sunt itaque placeat culpa sit a sapiente magni voluptate nostrum nulla nihil! Ut suscipit ad numquam saepe
      porro voluptatem maxime eius earum corrupti. Inventore totam, est consectetur tempore id quia repellat pariatur, ipsum vero nulla quam sit
      sapiente ea cum. Ex, dignissimos? Officia repudiandae earum veritatis eius voluptatibus molestiae, assumenda facilis consequatur nihil natus
      vero.
    </div>
    <div class="content">
      Lorem ipsum dolor sit amet consectetur, adipisicing elit. Dolorem distinctio, natus voluptates corrupti similique illum obcaecati aut debitis
      vel ipsam impedit rem ratione amet. Dolores dicta sed vel ipsum commodi. Error commodi molestiae distinctio explicabo eligendi blanditiis
      possimus architecto excepturi officiis inventore incidunt laboriosam recusandae repudiandae natus eveniet repellendus consequuntur aliquid,
      dolor nam pariatur culpa, dignissimos nemo? Laboriosam, corrupti esse! Rerum, minima. Assumenda repellat enim debitis earum recusandae,
      doloremque autem labore at non nulla vitae deleniti cumque suscipit beatae, quas dignissimos quasi pariatur iusto! Sapiente sequi molestias illo
      mollitia deleniti debitis, itaque voluptate aperiam dicta autem eveniet beatae, velit aliquam nemo. Temporibus corporis a eius ad alias,
      blanditiis nobis nisi accusantium impedit eligendi neque maxime debitis fugiat facilis? Minus ea quo provident distinctio magnam inventore
      possimus, ipsa quisquam necessitatibus? Necessitatibus, vitae non sed ipsam exercitationem corrupti quod enim nulla. Cum dolorem architecto hic
      deleniti eaque veniam ducimus, soluta voluptate tempora corrupti numquam animi placeat inventore vitae assumenda similique molestias culpa
      obcaecati nulla magnam maiores eos illum aperiam! Unde necessitatibus quas culpa velit totam doloremque fugiat voluptatum sapiente, quis iste ex
      labore, eos eius? Nemo, reiciendis blanditiis. Pariatur ipsum nihil, voluptatibus eligendi rerum architecto vero! Voluptatibus corporis nisi non
      repellat fugit, ipsum exercitationem quam dignissimos soluta eum ullam vel doloribus error atque. Natus minima assumenda quae neque harum iure,
      fuga, debitis soluta veritatis numquam minus incidunt, ab omnis velit necessitatibus rerum dolores saepe excepturi eos? Labore voluptas tempore
      fuga odio aut eum, dicta harum rem et sunt itaque placeat culpa sit a sapiente magni voluptate nostrum nulla nihil! Ut suscipit ad numquam saepe
      porro voluptatem maxime eius earum corrupti. Inventore totam, est consectetur tempore id quia repellat pariatur, ipsum vero nulla quam sit
      sapiente ea cum. Ex, dignissimos? Officia repudiandae earum veritatis eius voluptatibus molestiae, assumenda facilis consequatur nihil natus
      vero.
    </div>
    <div class="content">
      Lorem ipsum dolor sit amet consectetur, adipisicing elit. Dolorem distinctio, natus voluptates corrupti similique illum obcaecati aut debitis
      vel ipsam impedit rem ratione amet. Dolores dicta sed vel ipsum commodi. Error commodi molestiae distinctio explicabo eligendi blanditiis
      possimus architecto excepturi officiis inventore incidunt laboriosam recusandae repudiandae natus eveniet repellendus consequuntur aliquid,
      dolor nam pariatur culpa, dignissimos nemo? Laboriosam, corrupti esse! Rerum, minima. Assumenda repellat enim debitis earum recusandae,
      doloremque autem labore at non nulla vitae deleniti cumque suscipit beatae, quas dignissimos quasi pariatur iusto! Sapiente sequi molestias illo
      mollitia deleniti debitis, itaque voluptate aperiam dicta autem eveniet beatae, velit aliquam nemo. Temporibus corporis a eius ad alias,
      blanditiis nobis nisi accusantium impedit eligendi neque maxime debitis fugiat facilis? Minus ea quo provident distinctio magnam inventore
      possimus, ipsa quisquam necessitatibus? Necessitatibus, vitae non sed ipsam exercitationem corrupti quod enim nulla. Cum dolorem architecto hic
      deleniti eaque veniam ducimus, soluta voluptate tempora corrupti numquam animi placeat inventore vitae assumenda similique molestias culpa
      obcaecati nulla magnam maiores eos illum aperiam! Unde necessitatibus quas culpa velit totam doloremque fugiat voluptatum sapiente, quis iste ex
      labore, eos eius? Nemo, reiciendis blanditiis. Pariatur ipsum nihil, voluptatibus eligendi rerum architecto vero! Voluptatibus corporis nisi non
      repellat fugit, ipsum exercitationem quam dignissimos soluta eum ullam vel doloribus error atque. Natus minima assumenda quae neque harum iure,
      fuga, debitis soluta veritatis numquam minus incidunt, ab omnis velit necessitatibus rerum dolores saepe excepturi eos? Labore voluptas tempore
      fuga odio aut eum, dicta harum rem et sunt itaque placeat culpa sit a sapiente magni voluptate nostrum nulla nihil! Ut suscipit ad numquam saepe
      porro voluptatem maxime eius earum corrupti. Inventore totam, est consectetur tempore id quia repellat pariatur, ipsum vero nulla quam sit
      sapiente ea cum. Ex, dignissimos? Officia repudiandae earum veritatis eius voluptatibus molestiae, assumenda facilis consequatur nihil natus
      vero.
    </div>
    <div class="content">
      Lorem ipsum dolor sit amet consectetur, adipisicing elit. Dolorem distinctio, natus voluptates corrupti similique illum obcaecati aut debitis
      vel ipsam impedit rem ratione amet. Dolores dicta sed vel ipsum commodi. Error commodi molestiae distinctio explicabo eligendi blanditiis
      possimus architecto excepturi officiis inventore incidunt laboriosam recusandae repudiandae natus eveniet repellendus consequuntur aliquid,
      dolor nam pariatur culpa, dignissimos nemo? Laboriosam, corrupti esse! Rerum, minima. Assumenda repellat enim debitis earum recusandae,
      doloremque autem labore at non nulla vitae deleniti cumque suscipit beatae, quas dignissimos quasi pariatur iusto! Sapiente sequi molestias illo
      mollitia deleniti debitis, itaque voluptate aperiam dicta autem eveniet beatae, velit aliquam nemo. Temporibus corporis a eius ad alias,
      blanditiis nobis nisi accusantium impedit eligendi neque maxime debitis fugiat facilis? Minus ea quo provident distinctio magnam inventore
      possimus, ipsa quisquam necessitatibus? Necessitatibus, vitae non sed ipsam exercitationem corrupti quod enim nulla. Cum dolorem architecto hic
      deleniti eaque veniam ducimus, soluta voluptate tempora corrupti numquam animi placeat inventore vitae assumenda similique molestias culpa
      obcaecati nulla magnam maiores eos illum aperiam! Unde necessitatibus quas culpa velit totam doloremque fugiat voluptatum sapiente, quis iste ex
      labore, eos eius? Nemo, reiciendis blanditiis. Pariatur ipsum nihil, voluptatibus eligendi rerum architecto vero! Voluptatibus corporis nisi non
      repellat fugit, ipsum exercitationem quam dignissimos soluta eum ullam vel doloribus error atque. Natus minima assumenda quae neque harum iure,
      fuga, debitis soluta veritatis numquam minus incidunt, ab omnis velit necessitatibus rerum dolores saepe excepturi eos? Labore voluptas tempore
      fuga odio aut eum, dicta harum rem et sunt itaque placeat culpa sit a sapiente magni voluptate nostrum nulla nihil! Ut suscipit ad numquam saepe
      porro voluptatem maxime eius earum corrupti. Inventore totam, est consectetur tempore id quia repellat pariatur, ipsum vero nulla quam sit
      sapiente ea cum. Ex, dignissimos? Officia repudiandae earum veritatis eius voluptatibus molestiae, assumenda facilis consequatur nihil natus
      vero.
    </div>
    <div class="content">
      Lorem ipsum dolor sit amet consectetur, adipisicing elit. Dolorem distinctio, natus voluptates corrupti similique illum obcaecati aut debitis
      vel ipsam impedit rem ratione amet. Dolores dicta sed vel ipsum commodi. Error commodi molestiae distinctio explicabo eligendi blanditiis
      possimus architecto excepturi officiis inventore incidunt laboriosam recusandae repudiandae natus eveniet repellendus consequuntur aliquid,
      dolor nam pariatur culpa, dignissimos nemo? Laboriosam, corrupti esse! Rerum, minima. Assumenda repellat enim debitis earum recusandae,
      doloremque autem labore at non nulla vitae deleniti cumque suscipit beatae, quas dignissimos quasi pariatur iusto! Sapiente sequi molestias illo
      mollitia deleniti debitis, itaque voluptate aperiam dicta autem eveniet beatae, velit aliquam nemo. Temporibus corporis a eius ad alias,
      blanditiis nobis nisi accusantium impedit eligendi neque maxime debitis fugiat facilis? Minus ea quo provident distinctio magnam inventore
      possimus, ipsa quisquam necessitatibus? Necessitatibus, vitae non sed ipsam exercitationem corrupti quod enim nulla. Cum dolorem architecto hic
      deleniti eaque veniam ducimus, soluta voluptate tempora corrupti numquam animi placeat inventore vitae assumenda similique molestias culpa
      obcaecati nulla magnam maiores eos illum aperiam! Unde necessitatibus quas culpa velit totam doloremque fugiat voluptatum sapiente, quis iste ex
      labore, eos eius? Nemo, reiciendis blanditiis. Pariatur ipsum nihil, voluptatibus eligendi rerum architecto vero! Voluptatibus corporis nisi non
      repellat fugit, ipsum exercitationem quam dignissimos soluta eum ullam vel doloribus error atque. Natus minima assumenda quae neque harum iure,
      fuga, debitis soluta veritatis numquam minus incidunt, ab omnis velit necessitatibus rerum dolores saepe excepturi eos? Labore voluptas tempore
      fuga odio aut eum, dicta harum rem et sunt itaque placeat culpa sit a sapiente magni voluptate nostrum nulla nihil! Ut suscipit ad numquam saepe
      porro voluptatem maxime eius earum corrupti. Inventore totam, est consectetur tempore id quia repellat pariatur, ipsum vero nulla quam sit
      sapiente ea cum. Ex, dignissimos? Officia repudiandae earum veritatis eius voluptatibus molestiae, assumenda facilis consequatur nihil natus
      vero.
    </div>
    <div class="content">
      Lorem ipsum dolor sit amet consectetur, adipisicing elit. Dolorem distinctio, natus voluptates corrupti similique illum obcaecati aut debitis
      vel ipsam impedit rem ratione amet. Dolores dicta sed vel ipsum commodi. Error commodi molestiae distinctio explicabo eligendi blanditiis
      possimus architecto excepturi officiis inventore incidunt laboriosam recusandae repudiandae natus eveniet repellendus consequuntur aliquid,
      dolor nam pariatur culpa, dignissimos nemo? Laboriosam, corrupti esse! Rerum, minima. Assumenda repellat enim debitis earum recusandae,
      doloremque autem labore at non nulla vitae deleniti cumque suscipit beatae, quas dignissimos quasi pariatur iusto! Sapiente sequi molestias illo
      mollitia deleniti debitis, itaque voluptate aperiam dicta autem eveniet beatae, velit aliquam nemo. Temporibus corporis a eius ad alias,
      blanditiis nobis nisi accusantium impedit eligendi neque maxime debitis fugiat facilis? Minus ea quo provident distinctio magnam inventore
      possimus, ipsa quisquam necessitatibus? Necessitatibus, vitae non sed ipsam exercitationem corrupti quod enim nulla. Cum dolorem architecto hic
      deleniti eaque veniam ducimus, soluta voluptate tempora corrupti numquam animi placeat inventore vitae assumenda similique molestias culpa
      obcaecati nulla magnam maiores eos illum aperiam! Unde necessitatibus quas culpa velit totam doloremque fugiat voluptatum sapiente, quis iste ex
      labore, eos eius? Nemo, reiciendis blanditiis. Pariatur ipsum nihil, voluptatibus eligendi rerum architecto vero! Voluptatibus corporis nisi non
      repellat fugit, ipsum exercitationem quam dignissimos soluta eum ullam vel doloribus error atque. Natus minima assumenda quae neque harum iure,
      fuga, debitis soluta veritatis numquam minus incidunt, ab omnis velit necessitatibus rerum dolores saepe excepturi eos? Labore voluptas tempore
      fuga odio aut eum, dicta harum rem et sunt itaque placeat culpa sit a sapiente magni voluptate nostrum nulla nihil! Ut suscipit ad numquam saepe
      porro voluptatem maxime eius earum corrupti. Inventore totam, est consectetur tempore id quia repellat pariatur, ipsum vero nulla quam sit
      sapiente ea cum. Ex, dignissimos? Officia repudiandae earum veritatis eius voluptatibus molestiae, assumenda facilis consequatur nihil natus
      vero.
    </div>
  </div>
</template>

<script setup>
$(document).ready(() => {
  const els = document.querySelectorAll(".content");
  const stateMap = new Map();
  let lastScrollY = window.scrollY;

  const settings = {
    distants: 50, // pixels
    durations: 1, // seconds
  };

  // Initial CSS
  els.forEach((el) => {
    Object.assign(el.style, {
      opacity: "0",
      transform: `translateY(${settings.distants}px)`,
      transition: `opacity ${settings.durations}s ease, transform ${settings.durations}s ease`,
    });
  });

  function handleScroll(isInitialLoad = false) {
    const windowH = window.innerHeight;
    const currentScrollY = window.scrollY;
    const direction = currentScrollY > lastScrollY ? "down" : "up";
    lastScrollY = currentScrollY;

    els.forEach((el, index) => {
      // index added
      const rect = el.getBoundingClientRect();
      const elementTop = rect.top;
      const elementBottom = rect.bottom;

      let st = stateMap.get(el) || { animated: false };

      // Animate in if element is in viewport (scroll down or initial load)
      if ((direction === "down" || isInitialLoad) && elementBottom > 0 && elementTop < windowH && !st.animated) {
        Object.assign(el.style, {
          opacity: "1",
          transform: "translateY(0)",
        });
        st.animated = true;
      }

      // Animate out when scrolling up, only if element is fully off screen at bottom
      // Skip the first element
      if (!isInitialLoad && direction === "up" && st.animated && index !== 0) {
        if (elementTop >= windowH || elementBottom >= windowH) {
          Object.assign(el.style, {
            opacity: "0",
            transform: `translateY(${settings.distants}px)`,
          });
          st.animated = false;
        }
      }

      stateMap.set(el, st);
    });
  }

  // Events
  $(window).on("scroll resize", () => handleScroll(false));
  // Initial check on page load
  handleScroll(true);
});
</script>
